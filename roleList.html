<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <title>role</title>

    <link rel="stylesheet" type="text/css" href="./dist/semantic.css">

</head>
<body id="home">
<table class="ui celled striped table">
    <thead><tr><th colspan="4">角色列表</th></tr></thead>
    <tbody id="role-append"></tbody>
</table>
</body>
<script src="./js/jquery-3.4.1.min.js"></script>
<script src="./dist/semantic.js"></script>

<script>
    var requestBody = {"token":localStorage.getItem("token")};
    var role_list = $('#role-append');

    $.ajax({
        type: "post",
        headers: {
            'Access-Token': localStorage.getItem("token")
        },
        url: "http://localhost:5050/apis/system/role/all",
        dataType: "json",
        contentType: "application/json",
        data: JSON.stringify(requestBody),
        success: function (jsonmsg) {
            if (jsonmsg.code == 200) {
                var roles = jsonmsg.data;
                var ss = "";
                for (var id in roles){
                    ss +=
                        '<tr>\n' +
                        '<td>' + roles[id].rId + '</td>' +
                        '<td>' + roles[id].roleName + '</td>' +
                        '<td class=\"right aligned collapsing\">' + roles[id].rtype +'</td>' +
                        '</tr>';
                }
                role_list.html(ss);
            }
        },
        error: function (jsonmsg) {
            console.log(jsonmsg);
            if (jsonmsg.responseJSON.code == 403){
                document.location.href = './403.html';
            }
            else if (jsonmsg.responseJSON.code == 401){
                document.location.href = './login.html';
            }
            else{
                alert(jsonmsg.responseJSON.msg);
            }
        }
    });
</script>
</html>
